<div class="docs-list">
    <div class="header flex flex-start">
        <a routerLink="/">{{appSettingsService.getAppName()}}</a>
    </div>
    <div class="guide-section">
        <h1>Getting started</h1>
        <p>Suppose you are frontend developer and if your application wants to fetch or save data in database, you need to write server side code that connects your database and expose APIs for your frontend application. But as a frontend developer, you want concentrate in architecture and implemention your frontend and use any Backend-as-a-Service like Firebase to build the backend. Here <b>{{appSettingsService.getAppName()}}</b> is a kind of platform that helps to maintain your backend without launching any servers and database, but only writing MongoDB queries in the frontend. We'll see with an example</p>
    </div>

    <hr>
    <div class="guide-section">
        <h1>Tutorial</h1>
        <p>Let us see how we can build a todo app with signup and login functionalities without writing any server side code.</p>
        <br>
        <b>Register account in <b>{{appSettingsService.getAppName()}}</b> and create a application. You can find the application secret key in general tab. Make sure it is secret to you only. This secret key should be added in "app_secret" header in all the requests</b>
        <br>
        <br>
        <p>1. To welcome users to our application, <b>{{appSettingsService.getAppName()}}</b> provides standard Email, password signup endpoint. In request body, add <b>mailId, password</b> fields. You can add extra fields as you want. This API will create a user account in users collection and return the user document with unique id. We can save the returned user object in global store</p>
        <div class="api-title">
            <p>POST: {{appUrls.CPBASE_SIGNUP}}</p>
            <p>
                {{"{
                    mailId: 'user@mail.com',
                    password: 'Password'
                }"}}
            </p>
        </div>
        <br>
        <p>2. After user creates account, to save list of todo items we can use <b>{{appSettingsService.getAppName()}} Global endpoint</b>. This single endpoint can be used to perform any CRUD operations in your application database. In the request body, we need to specify three fields - <b>collectionName, action and data.</b> Collection name specifies the MongoDB collection name. Action specifies the MongoDB operations like <i>insertOne, insertMany, aggregate</i> and data specifies array of todo items. Response of this API is a standard MongoDB response based on the action field </p>
        <p><b>NOTE: The value of data field depends on the type of action you are doing. If you specify <i>insertOne or insertMany</i> action, data field represents json document to be saved. If you specify the action as aggregate, data field contain aggregate query</b></p>
        <div class="api-title">
            <p>POST: {{appUrls.GLOBAL}}</p>
            <p>{{"{
                    collectionName: 'todos', 
                    action: 'insertOne', 
                    data: { user_id: '123', todos: [{name:'Javascript', is_completed: false}] }
                }"}}</p>
        </div>
        <br>
        <p>3. To fetch list of todo items saved by the user, we can use the same global API. Here data field act as a find query for MongoDB operation</p>
        <div class="api-title">
            <p>POST: {{appUrls.GLOBAL}}</p>
            <p>{{"{
                    collectionName: 'todos', 
                    action: 'find', 
                    data: { user_id: '123'}
                }"}}</p>
        </div>
        <br>
        <p>4. For users to login into our application, <b>{{appSettingsService.getAppName()}}</b> provides standard Email, password login endpoint. In request body, add <b>mailId, password</b> fields. If the mail and password matches, it returns the user object and it can saved in global store</p>
        <div class="api-title">
            <p>POST: {{appUrls.CPBASE_LOGIN}}</p>
            <p>
                {{"{
                    mailId: 'user@mail.com',
                    password: 'Password'
                }"}}
            </p>
        </div>
        <br>
        <p>5. <b>{{appSettingsService.getAppName()}}</b> also provides API for file uploads. In Multipart request body, specify the file object in <i>file</i> field and storage path in <i>path</i> field.</p> After a successful upload, it returns the location of the file object. you can store this location in global API insert action.
        <div class="api-title">
            <p>POST: {{appUrls.STORAGE}}</p>
            <div>
                <b>Multipart request body:</b>
                <p>file: FileObject</p>
                <p>path: /path-to-store </p>
            </div>
        </div>
        <br>
        <hr>
    </div>

    <div class="guide-section">
        <h1>API Reference</h1>
        <div class="api-doc-detail" *ngFor="let doc of docs">
            <h3 class="doc-title">{{doc.title}}</h3>
            <p class="api-url">
                <b>{{doc.method+'  '}}</b>
                <span>{{doc.url}}</span>
            </p>
            <div *ngIf="doc?.dataLocation" class="doc-description">
                <h4>Sample request {{doc?.dataLocation}}</h4>
                <pre>{{doc.dataValue | jsonStringifier}}</pre>
            </div>
            <div *ngIf="doc?.dataTypes" class="doc-description">
                <h4>Data types</h4>
                <p *ngFor="let detail of doc?.dataTypes"><b>{{detail.variable}}</b> : {{detail.type}}</p>
            </div>
            <div class="doc-description">
                <h4>Headers</h4>
                <p>app_secret : {{projectId}}</p>
            </div>
            <div class="doc-description">
                <h4>Description</h4>
                <p>{{doc.description}}</p>
            </div>
            <div class="doc-description">
                <h4>Response</h4>
                <p>{{doc.response | jsonStringifier}}</p>
            </div>
            <div *ngIf="doc.note" class="doc-description">
                <h4>NOTE</h4>
                <p><b>{{doc.note}}</b></p>
            </div>
        </div>
    </div>
</div>